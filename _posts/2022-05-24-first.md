---
layout: single
title:  "스타벅스 매장 입지 가설 #1"
categories: python
tag: [python, blog, jekyll]
toc: true
author_profile: false
---

<head>
  <style>
    table.dataframe {
      white-space: normal;
      width: 100%;
      height: 240px;
      display: block;
      overflow: auto;
      font-family: Arial, sans-serif;
      font-size: 0.9rem;
      line-height: 20px;
      text-align: center;
      border: 0px !important;
    }

    table.dataframe th {
      text-align: center;
      font-weight: bold;
      padding: 8px;
    }

    table.dataframe td {
      text-align: center;
      padding: 8px;
    }

    table.dataframe tr:hover {
      background: #b8d1f3; 
    }

    .output_prompt {
      overflow: auto;
      font-size: 0.9rem;
      line-height: 1.45;
      border-radius: 0.3rem;
      -webkit-overflow-scrolling: touch;
      padding: 0.8rem;
      margin-top: 0;
      margin-bottom: 15px;
      font: 1rem Consolas, "Liberation Mono", Menlo, Courier, monospace;
      color: $code-text-color;
      border: solid 1px $border-color;
      border-radius: 0.3rem;
      word-break: normal;
      white-space: pre;
    }

  .dataframe tbody tr th:only-of-type {
      vertical-align: middle;
  }

  .dataframe tbody tr th {
      vertical-align: top;
  }

  .dataframe thead th {
      text-align: center !important;
      padding: 8px;
  }

  .page__content p {
      margin: 0 0 0px !important;
  }

  .page__content p > strong {
    font-size: 0.8rem !important;
  }

  </style>
</head>


### 스타벅스의 매장 입지에 대한 2가지 가설

#### 1. 거주 인구가 많은 지역에 스타벅스 매장이 많이 입지해 있을 것이다.

#### 2. 직장인이 많은 지역에 스타벅스 매장이 많은 입지해 있을 것이다.


#### 데이터 수집 (서울시 내)

##### -1. 스타벅스들의 위치

##### -2. 인구통계 데이터 수집


##### 스타벅스 매장 목록 데이터 생성



```python
# 라이브러리 설정
from selenium import webdriver
from bs4 import BeautifulSoup
import pandas as pd
import time

### driver
path = "C:\webdriver\chromedriver.exe"
driver = webdriver.Chrome(path)

url = "https://www.starbucks.co.kr/store/store_map.do?disp=locale"
driver.get(url)

time.sleep(3)

## 서울 버튼
driver.find_element_by_css_selector("#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step1 > div.loca_step1_cont > ul > li:nth-child(1) > a").click()

time.sleep(2)

## 전체 버튼
driver.find_element_by_css_selector("#mCSB_2_container > ul > li:nth-child(1) > a").click()
```

<pre>
C:\Users\a0104\AppData\Local\Temp\ipykernel_4068\3963123247.py:9: DeprecationWarning: executable_path has been deprecated, please pass in a Service object
  driver = webdriver.Chrome(path)
C:\Users\a0104\AppData\Local\Temp\ipykernel_4068\3963123247.py:17: DeprecationWarning: find_element_by_css_selector is deprecated. Please use find_element(by=By.CSS_SELECTOR, value=css_selector) instead
  driver.find_element_by_css_selector("#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step1 > div.loca_step1_cont > ul > li:nth-child(1) > a").click()
C:\Users\a0104\AppData\Local\Temp\ipykernel_4068\3963123247.py:22: DeprecationWarning: find_element_by_css_selector is deprecated. Please use find_element(by=By.CSS_SELECTOR, value=css_selector) instead
  driver.find_element_by_css_selector("#mCSB_2_container > ul > li:nth-child(1) > a").click()
</pre>

```python
html = driver.page_source
soup = BeautifulSoup(html, "html.parser")
```

```python
starbucks_soup_list = soup.select("li.quickResultLstCon")
print(len(starbucks_soup_list))

starbucks_store = starbucks_soup_list[0]

name = starbucks_store.select('strong')[0].text.strip()
print(name)
address = str(starbucks_store.select("p.result_details")[0]).split('<br/>')[0].split('>')[1]     ## '<br/>'로 split 하게 되면 리스트로 반환되는데 그중에 주소가 나오는 부분만 자르기
print(address)
phone = str(starbucks_store.select("p.result_details")[0]).split('<br/>')[1].split('<')[0]       ## '<br/>'로 split을 하고 그 중에 전화번호 나오는 부분만 자르기
print(phone)
lat = starbucks_store['data-lat'].strip()
print(lat)
long = starbucks_store['data-long'].strip()
print(long)
store_type = starbucks_store.select("i")[0]['class'][0][4:]
print(store_type)
```

<pre>
578
역삼아레나빌딩
서울특별시 강남구 언주로 425 (역삼동)
1522-3232
37.501087
127.043069
general
</pre>
### 스타벅스 매장 목록 데이터 생성



```python

starbucks_list = []

for item in starbucks_soup_list:
    name = item.select('strong')[0].text.strip()
    address = str(item.select("p.result_details")[0]).split('<br/>')[0].split('>')[1]
    phone = str(item.select("p.result_details")[0]).split('<br/>')[1].split('<')[0]
    lat = item['data-lat'].strip()    
    long = item['data-long'].strip()
    store_type = item("i")[0]['class'][0][4:]
    starbucks_list.append([name,lat,long,store_type,address,phone])
    
```

### DataFrame으로 만들기



```python
df_cols = ['매장명','위도','경도','매장타입','주소','전화번호']

starbucks_df = pd.DataFrame(starbucks_list,columns=df_cols)

starbucks_df.head()
```

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>매장명</th>
      <th>위도</th>
      <th>경도</th>
      <th>매장타입</th>
      <th>주소</th>
      <th>전화번호</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>역삼아레나빌딩</td>
      <td>37.501087</td>
      <td>127.043069</td>
      <td>general</td>
      <td>서울특별시 강남구 언주로 425 (역삼동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>1</th>
      <td>논현역사거리</td>
      <td>37.510178</td>
      <td>127.022223</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 538 (논현동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>2</th>
      <td>신사역성일빌딩</td>
      <td>37.514132</td>
      <td>127.020563</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 584 (논현동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>3</th>
      <td>국기원사거리</td>
      <td>37.499517</td>
      <td>127.031495</td>
      <td>general</td>
      <td>서울특별시 강남구 테헤란로 125 (역삼동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>4</th>
      <td>대치재경빌딩R</td>
      <td>37.494668</td>
      <td>127.062583</td>
      <td>reserve</td>
      <td>서울특별시 강남구 남부순환로 2947 (대치동)</td>
      <td>1522-3232</td>
    </tr>
  </tbody>
</table>
</div>


### DataFrame을 Excel로 변환



```python
starbucks_df.to_excel("data_starbucks/seoul_starbucks_list.xlsx",index=False)
```


```python
```
